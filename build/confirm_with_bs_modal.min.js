var $;$=this.jQuery,$.fn.extend({confirmWithModal:function(a){var n,o,t,i;return null==a&&(a={}),n={modal_class:"",title:"Are you sure?",title_class:"",body:"This action cannot be undone.",body_class:"",password:!1,prompt:"Type <strong>%s</strong> to continue:",footer_class:"",ok:"Confirm",ok_class:"btn btn-danger",cancel:"Cancel",cancel_class:"btn btn-default"},i=$.extend({},n,a),o=function(a){var n,o,t,r,d,l,s,e;return(r=a.data("confirm"))?"string"==typeof r&&r.length>0?((null!=(e=$.rails)?e.confirm:void 0)||window.confirm).call(window,r):(l=function(a){return r[a]||i[a]},d=$("<div class='modal fade'>\n  <div class='modal-dialog "+l("modal_class")+"'>\n    <div class='modal-content'>\n      <div class='modal-header'>\n        <button type='button' class='close' data-dismiss='modal' aria-label='Close'><span aria-hidden='true'>&times;</span></button>\n        <h4 data-confirm-title class=\"modal-title "+l("title_class")+'"></h4>\n      </div>\n      <div class="modal-body '+l("body_class")+'">\n        <p data-confirm-body></p>\n      </div>\n      <div data-confirm-footer class="modal-footer '+l("footer_class")+"\">\n        <a data-confirm-cancel class='"+l("cancel_class")+"'></a>\n      </div>\n    </div>\n  </div>\n</div>"),n=a.is("a")?a.clone():$("<a/>"),n.removeAttr("data-confirm").attr("class",l("ok_class")).html(l("ok")).on("click",function(n){return $(this).prop("disabled")?!1:(a.trigger("confirm.modal",n),a.is("form, :input")?a.closest("form").removeAttr("data-confirm").submit():void 0)}),d.find("[data-confirm-title]").html(l("title")),d.find("[data-confirm-body]").html(l("body")),d.find("[data-confirm-cancel]").html(l("cancel")).on("click",function(n){return d.modal("hide"),a.trigger("cancel.modal",n)}),d.find("[data-confirm-footer]").append(n),(s=l("password"))&&(t=l("prompt").replace("%s",s),o="<div class='form-group'>\n  <label>\n    "+t+"\n    <input data-confirm-password class='form-control' type='text'/>\n  </label>\n</div>",d.find("[data-confirm-body]").after($(o)),d.find("[data-confirm-password]").on("keyup",function(){var a;return a=$(this).val()!==s,n.toggleClass("disabled",a).prop("disabled",a)}).trigger("keyup")),d.appendTo($("body")).modal().on("hidden.bs.modal",function(){return d.remove()}),!1):!0},$.rails?($.rails.allowAction=function(a){return o($(a))},$(this)):(t=function(a){return o($(this))?void 0:(a.preventDefault(),a.stopImmediatePropagation())},this.each(function(){var a;return a=$(this),a.on("click","a[data-confirm], :input[data-confirm]",t),a.on("submit","form[data-confirm]",t),a}))}});